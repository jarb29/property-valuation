{% extends "base.html" %}

{% block title %}Property Valuation - PropertyAI{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">
            <i class="fas fa-chart-line"></i>
            AI-Powered Property Valuation
        </h1>
        <p class="hero-subtitle">
            Get accurate property valuations for Chilean real estate using advanced machine learning models
        </p>
    </div>
</div>

<div class="valuation-container">
    <div class="form-section">
        <div class="section-header">
            <h2><i class="fas fa-home"></i> Property Details</h2>
            <p>Enter the property information to get an instant valuation</p>
        </div>

        <form id="valuationForm" class="valuation-form">
            <!-- Property Type -->
            <div class="form-group">
                <label for="type" class="form-label">
                    <i class="fas fa-building"></i> Property Type
                </label>
                <select id="type" name="type" class="form-select" required>
                    <option value="">Select property type</option>
                    <option value="departamento">Apartment (Departamento)</option>
                    <option value="casa">House (Casa)</option>
                </select>
            </div>

            <!-- Sector -->
            <div class="form-group">
                <label for="sector" class="form-label">
                    <i class="fas fa-map-marker-alt"></i> Sector
                </label>
                <select id="sector" name="sector" class="form-select" required>
                    <option value="">Select sector</option>
                    <option value="las condes">Las Condes (5,293 properties)</option>
                    <option value="lo barnechea">Lo Barnechea (2,749 properties)</option>
                    <option value="vitacura">Vitacura (2,720 properties)</option>
                    <option value="nunoa">Ñuñoa (1,841 properties)</option>
                    <option value="providencia">Providencia (1,779 properties)</option>
                    <option value="la reina">La Reina (970 properties)</option>
                </select>
            </div>

            <!-- Areas -->
            <div class="form-row">
                <div class="form-group">
                    <label for="net_usable_area" class="form-label">
                        <i class="fas fa-ruler-combined"></i> Net Usable Area (m²)
                    </label>
                    <input type="number" id="net_usable_area" name="net_usable_area" 
                           class="form-input" step="0.1" min="10" max="1000" 
                           placeholder="e.g., 120.5" required>
                    <small class="form-hint">Range: 10 - 1,000 m²</small>
                </div>

                <div class="form-group">
                    <label for="net_area" class="form-label">
                        <i class="fas fa-expand-arrows-alt"></i> Total Net Area (m²)
                    </label>
                    <input type="number" id="net_area" name="net_area" 
                           class="form-input" step="0.1" min="1" max="2000" 
                           placeholder="e.g., 150.0" required>
                    <small class="form-hint">Range: 1 - 2,000 m²</small>
                </div>
            </div>

            <!-- Rooms and Bathrooms -->
            <div class="form-row">
                <div class="form-group">
                    <label for="n_rooms" class="form-label">
                        <i class="fas fa-bed"></i> Number of Rooms
                    </label>
                    <select id="n_rooms" name="n_rooms" class="form-select" required>
                        <option value="">Select rooms</option>
                        <option value="1">1 Room</option>
                        <option value="2">2 Rooms</option>
                        <option value="3">3 Rooms</option>
                        <option value="4">4 Rooms</option>
                        <option value="5">5 Rooms</option>
                        <option value="6">6+ Rooms</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="n_bathroom" class="form-label">
                        <i class="fas fa-bath"></i> Number of Bathrooms
                    </label>
                    <select id="n_bathroom" name="n_bathroom" class="form-select" required>
                        <option value="">Select bathrooms</option>
                        <option value="1">1 Bathroom</option>
                        <option value="2">2 Bathrooms</option>
                        <option value="3">3 Bathrooms</option>
                        <option value="4">4 Bathrooms</option>
                        <option value="5">5+ Bathrooms</option>
                    </select>
                </div>
            </div>

            <!-- Location -->
            <div class="form-group">
                <label class="form-label">
                    <i class="fas fa-map"></i> Location
                </label>
                <div class="location-inputs">
                    <div class="coordinate-group">
                        <label for="latitude" class="coordinate-label">Latitude</label>
                        <input type="number" id="latitude" name="latitude" 
                               class="form-input coordinate-input" step="0.000001" 
                               min="-33.525" max="-33.305" 
                               placeholder="-33.4172" required>
                    </div>
                    <div class="coordinate-group">
                        <label for="longitude" class="coordinate-label">Longitude</label>
                        <input type="number" id="longitude" name="longitude" 
                               class="form-input coordinate-input" step="0.000001" 
                               min="-70.644" max="-70.432" 
                               placeholder="-70.5476" required>
                    </div>
                </div>
                <small class="form-hint">Click on the map to select location automatically</small>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="submit-btn" id="submitBtn">
                <i class="fas fa-calculator"></i>
                <span>Calculate Property Value</span>
                <div class="loading-spinner" style="display: none;"></div>
            </button>
        </form>
    </div>

    <div class="map-section">
        <div class="section-header">
            <h2><i class="fas fa-map"></i> Interactive Map</h2>
            <p>Click on the map to select the property location</p>
        </div>
        
        <div id="map" class="map-container"></div>
        
        <div class="map-info">
            <div class="info-item">
                <i class="fas fa-info-circle"></i>
                <span>Coverage: Santiago Metropolitan Region</span>
            </div>
            <div class="info-item">
                <i class="fas fa-database"></i>
                <span>Training Data: 15,352 properties</span>
            </div>
        </div>
    </div>
</div>

<!-- Results Modal -->
<div id="resultsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-chart-bar"></i> Valuation Results</h3>
            <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body" id="resultsContent">
            <!-- Results will be loaded here -->
        </div>
    </div>
</div>
{% endblock %}